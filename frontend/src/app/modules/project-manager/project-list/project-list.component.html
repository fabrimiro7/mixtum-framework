<div class="container-fluid">
  <div class="row align-items-center">
    <div class="col">
      <h1>Progetti</h1>
    </div>
    <div class="col-md-auto text-md-right">
      <button *ngIf="userType !== 'Utente'" id="btn" mat-raised-button class="primary-button" (click)="redirectTo('/projects/add')">        
        <span>AGGIUNGI PROGETTO</span>
        <mat-icon fontIcon="add"></mat-icon>
      </button>
    </div>
  </div>
</div>

        
  <div class="mt-3">
    <div class="totals-card">
      <div class="container-fluid d-none d-md-block">
        <table mat-table [dataSource]="projectData" matSort>

          <ng-container matColumnDef="title">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Titolo </th>
            <td mat-cell *matCellDef="let project"> {{project.title}}</td>
          </ng-container>

          <ng-container matColumnDef="client">
            <th mat-header-cell *matHeaderCellDef> Cliente </th>
            <td mat-cell *matCellDef="let project"> {{project.client.first_name}} {{project.client.last_name}} </td>
          </ng-container>
        
          <ng-container matColumnDef="insert_date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Data apertura </th>
            <td mat-cell *matCellDef="let project"> {{ trasformDate(project.insert_date)}} </td>
          </ng-container>
        

          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef> Azioni </th>
            <td mat-cell *matCellDef="let project">
                <div>
                    <a *ngIf="userType != 'Utente'" (click)="redirectTo('/projects/edit/' + this.project.id)">Modifica </a> <span *ngIf="userType != 'Utente'"> / </span> 
                    <a (click)="redirectTo('projects/' + this.project.id)">Visualizza</a>
                </div>
            </td>
        </ng-container>
        
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
        <mat-paginator [pageSizeOptions]="[35, 50, 125, 200]" aria-label="Select page"></mat-paginator>
      </div>
    </div>
  </div>

<!--MOBILE-->
<div class="container-fluid mobile">
  <div class="col">
  <div *ngFor= "let project of projectData.filteredData" class="ed-block-standard d-md-none">
        <div class="row">
          <div class="col">
            <h5>{{project.title}}</h5>
          </div>
          <div class="col text-right">
            <p>{{trasformDate(project.insert_date)}}</p>
          </div>
        </div>
        <div class="row">
          <div class="col">
          <p><b>Cliente:</b> {{project.client.first_name}} {{project.client.last_name}}</p>
        </div>
        </div>
    <div class="row">
      <div class="col">
        <button id="btnFull" mat-raised-button class="primary-button" (click)="redirectTo('projects/' + this.project.id)">VISUALIZZA</button>
      </div>
      <div *ngIf="userType !='Utente'" class="col text-right">
        <button id="btnFull" mat-raised-button class="primary-button-light" (click)="redirectTo('/projects/edit/' + this.project.id)">MODIFICA</button>
      </div>
  </div>
  </div>
</div>
</div>